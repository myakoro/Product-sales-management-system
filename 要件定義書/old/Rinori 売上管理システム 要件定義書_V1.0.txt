Rinori 売上管理システム 要件定義書_V1.0

1. プロジェクト概要

小規模D2Cブランド Rinori（リノリ） のための
「商品別・月次の予算 vs 実績・PL管理システム」 を構築する。

ネクストエンジン（以下 NE）のデータをベースに、

商品（型番）別に

月次で

予算・実績・粗利・広告費・利益
を把握できる 社内向けWebシステム。

対象ブランドはまず Rinori だが、
設計としては Rinori専用に縛りすぎない（将来他ブランドにも転用可能） 前提。

2. 目的 / 達成したい価値
2-1. 経営・販売判断に必要な可視化

商品（型番）別の数量・売上・原価・粗利を月次で可視化

予算 vs 実績 を商品単位・期間単位で把握

月次PL（売上−原価−広告費） を自動計算

任意期間（1ヶ月 / 3ヶ月 / 6ヶ月 / 期首〜現在 / 任意の月範囲）でのPL確認

「この3ヶ月で FR010 を60個売りたい」といった 期間予算ベースの管理 ができる

2-2. 運用面の価値

NE から出力したCSVをアップロードするだけで 売上実績データが反映 される

商品一覧CSVや売上CSVから 商品マスタ差分登録を半自動化

原価未設定などのミスを システム側の警告で検知 できる

管理したくない商品は完全に集計から除外 できる（廃盤や例外商品）

3. ターゲット（ユーザー）

Rinori オーナー本人

日次ではなく、主に 月単位・数ヶ月単位の売上 / 粗利 / PL / 予実進捗 を確認

次月の仕入・広告投入・値付けの判断に使う

必要に応じて社内スタッフ

NEから売上CSV・商品一覧CSVを出力し、本システムにアップロード

商品マスタの登録・更新作業

広告費の入力 / CSV取込

将来の別ブランドオーナー（拡張の可能性）

将来、友人ブランド向けに改修・再利用できる設計にしておく
（現フェーズではマルチブランド機能は実装不要）

4. 主なユースケース（UC）
UC-1. 売上CSVの取り込みと実績反映

NE 売上CSVをアップロード

アップロード時に 対象年月（YYYY-MM） を指定

CSV1行ごとに：

SKU → 正規表現ルールで 親コード（型番） に変換

「受注数」 → 販売数量

「売上金額（税込）」 → 「税率設定」に基づき 税抜換算（HALF UP）

商品マスタから原価を取得（原価未設定ならフラグ）

対象年月の実績として反映し、
月次・期間PLや予算進捗に即時反映。

取込モード：

追加モード … 既存実績に加算（同じ月内で未反映分のみを追加する運用）

上書きモード … 指定月の実績を一度全削除し、今回CSVの内容で 月全体を入れ直す

取込時に 任意コメント を残せる
（例：「2025-10 高島屋イベント売上」）

UC-2. 商品一覧CSVからの商品マスタ一括登録・差分更新

NE の 商品リスト（商品一覧CSV） をアップロード

各行の「商品コード（SKU）」に対し、SKU→親コード変換を適用

商品マスタと比較し：

未登録の親コード → 新規候補

原価・定価・商品名が異なる → 更新候補

原価（税別）＝ CSV 左から3列目

定価 ＝ 販売価格（税別）としてマッピング

一覧画面でユーザーがチェックしたものだけ、

親コード

商品名

販売価格（税別）

原価（税別）

自社 / 仕入フラグ

管理ステータス（管理中 / 管理外）
をマスタに登録・更新。

「在庫数」等、使わない列はそのまま渡してよく、システム側で無視する。

UC-3. 売上CSVからの「新商品候補」差分登録

売上CSV取り込み時に、商品マスタに存在しない親コードがあれば 新規候補として検知

毎回ダイアログで聞かず、
「新規商品候補一覧」画面に蓄積：

親コード

元SKU例

商品名（CSVにあれば）

一覧から：

「管理中としてマスタ登録」

「管理外として扱う（集計対象外）」
を選択可能。

UC-4. 商品マスタの閲覧・編集・削除（管理ステータス含む）

商品マスタ一覧で、以下が可能：

全項目ソート（親コード / 商品名 / 販売価格 / 原価 / 自社/仕入 / 管理ステータス / 登録日 etc）

フィルタ：

自社商品のみ / 仕入商品のみ / 両方

管理中のみ / 管理外のみ / 両方

商品コード・商品名のキーワード検索

編集：

商品名 / 販売価格 / 原価 / 自社/仕入フラグ / 管理ステータス を修正

削除：

原則として 論理削除（管理外に変更） として扱う
（過去実績との整合性のため物理削除はしない前提）

UC-5. 管理対象商品の見直し（管理中 ⇔ 管理外）

商品マスタの 管理ステータス を切り替え：

管理中 … 集計対象（売上・予算・PLに含める）

管理外 … 完全に集計外（売上CSVに存在しても無視、予算にも出さない）

廃盤商品や、あえて管理しない仕入商品などを管理外に設定。

UC-6. コード変換チェック（新商品コード設計の補助）

画面に NE 用SKUを入力 → 「変換チェック」ボタン

実際にシステムが使う親コード（Rule1〜3適用後）と、使用されたルールを表示

例：RINO-FR010-X-BLK → RINO-FR010（Rule1）

NEに新商品を登録する前に
「このコードで登録して大丈夫か？」を確認する用途。

UC-7. 予算設定（商品×月、および期間）

月別予算

対象年月（YYYY-MM）を選択

「管理中の商品」のみ一覧表示

商品ごとに：

予算数量を入力

販売価格（税別）×予算数量 → 予算売上（税別） 自動計算（手動修正可）

原価×予算数量 → 予算原価 自動計算

予算粗利 ＝ 予算売上 − 予算原価（自動計算）

期間予算（例：FR010を3ヶ月で60個）

商品 / 開始年月 / 終了年月 / 期間合計数量 を入力

システムが期間内の月に 等分して月別予算数量を生成

専用の「期間予算編集画面」で、期間内の月を横並びに表示し、
各月の数量を直接編集可能（Excel型）

画面上部に：

期間合計（基準値）

現在の月別合計

両者のズレ（+3 / −2 など）
をリアルタイム表示

ズレがある状態で保存する場合は警告を出す
（期間合計自体を変更することも可能）

UC-8. 予算 vs 実績の進捗確認（商品別）

対象期間（単月 / 複数月範囲）を指定

商品ごとに：

予算数量合計

実績数量合計

数量達成率 ＝ 実績数量 ÷ 予算数量

予算売上（税別）合計

実績売上（税別）合計

売上達成率

「今月30個の予定なのに、半月で10個しか売れていない」などの進捗を把握。

UC-9. 月次PL・期間PLの確認

対象期間：

単月（YYYY-MM）

3ヶ月

6ヶ月

期首〜現在

任意の範囲（YYYY-MM〜YYYY-MM）

表示項目（税別ベース）：

売上

原価

粗利

広告費

営業利益（粗利 − 広告費）

各項目について 率（％）をカッコ書きで併記：

原価率 ＝ 原価 ÷ 売上

粗利率 ＝ 粗利 ÷ 売上

広告率 ＝ 広告費 ÷ 売上

利益率 ＝ 営業利益 ÷ 売上

UC-10. 商品別PL・率の確認

商品別の実績一覧（期間指定可能）で：

売上（税別）

原価（税別）

粗利

原価率（原価 ÷ 売上）

粗利率（粗利 ÷ 売上）

広告費・利益の「商品別配賦」は現フェーズでは必須ではなく、
将来拡張前提。

UC-11. 広告費の登録・カテゴリ管理

手入力 または CSV取込 で、広告費を登録：

対象日 or 対象期間

金額

カテゴリ（広告費種別）

例：META広告・Google広告・展示会出展費・アンバサダー商品配布 etc

メモ / 備考

カテゴリはマスタ管理（追加・編集可能）

UC-12. 不完全マスタの警告と修正

原価や販売価格など必須項目が設定されていない「管理中の商品」が存在する場合：

トップページ上部に警告表示：

「⚠ 商品マスタに未設定項目があります（X件）」

→ 不完全マスタ一覧へのリンク

「管理外」の商品は警告対象外。

不完全商品は、PLでは「暫定扱い or 除外」の設計とし、アンチグラビティ側で最適案を決めてよい。

5. 主要機能

売上CSV取込（追加 / 上書き、対象年月・コメント・履歴管理）

商品一覧CSV取込によるマスタ一括登録・差分更新

売上CSVからの新商品候補抽出・マスタ登録

商品マスタ管理（一覧・編集・管理ステータス、自社/仕入、ソート・フィルタ・検索）

管理ステータス制御（管理中 / 管理外）

コード変換チェック機能

月別予算・期間予算管理（数量・売上・原価・粗利）

予算 vs 実績進捗確認（商品別・期間別）

月次 / 期間PL表示（率付き）

商品別PL表示（率付き）

広告費入力 / CSV取込・カテゴリ管理

不完全マスタ警告機能

税率設定（年月単位）

取込履歴管理（対象年月・モード・コメント・日時など）

6. 主要画面（概要）

トップページ / ダッシュボード

今月の売上・粗利・利益のサマリ

今月の主要商品の予算 vs 実績のハイレベル表示

不完全マスタ警告

新商品候補の有無

売上CSV取込画面

対象年月選択

取込モード（追加 / 上書き）

コメント入力欄

CSVファイル選択

取込履歴へのリンク

商品一覧CSV取込画面

取込履歴画面

対象年月 / モード / コメント / 取込日時 / レコード件数 など表示

商品マスタ一覧画面

フィルタ（自社/仕入、管理ステータス）

ソート（全項目）

商品コード・商品名検索

行単位で編集画面へ遷移

商品マスタ編集画面

商品名・販売価格・原価・自社/仕入・管理ステータスを編集

コード変換チェック画面

予算設定画面（単月）

期間予算編集画面（商品別）

対象商品と期間内の月が横並びで表示され、
数量を直接編集可能

期間合計 vs 月別合計のズレを表示・警告

予算 vs 実績一覧画面

PL画面（月次・期間）

商品別PL画面

広告費入力 / 一覧画面

税率設定画面

7. 扱うデータ（主要エンティティ）

※ 実際のテーブル名・正規化は設計側に委ねる。

商品マスタ

親コード（型番／product_code）

元SKU例（任意）

商品名

販売価格（税別）

原価（税別）

自社 / 仕入フラグ

管理ステータス（管理中 / 管理外）

登録日・更新日

売上実績

親コード

対象年月（period_ym）

数量

売上金額（税別）

原価金額（税別）

粗利

取込履歴ID など

予算（商品×月）

親コード

対象年月

予算数量

予算売上（税別）

予算原価（税別）

予算粗利

期間予算（商品×期間）

親コード

開始年月

終了年月

期間合計数量

期間合計売上（任意）

備考

広告費

日付 or 期間

金額

カテゴリID

メモ

広告費カテゴリマスタ

税率設定

適用開始年月

税率（例：0.10）

CSV取込履歴

種別（売上 / 商品一覧 / 広告費 等）

対象年月

取込モード（追加 / 上書き）

コメント

取込日時

件数 など

新商品候補一覧（もしくは状態付き商品マスタ）

8. 動作フロー（ざっくり）

初期セットアップ

税率設定に 10% を登録（デフォルト）

商品一覧CSVから商品マスタを生成

新商品の発生

NE商品リスト更新 → 商品一覧CSVから差分マスタ登録
または

売上CSVから新商品候補を検知 → マスタ登録

月次運用

月初〜月中：

売上CSV（部分）を追加モードで取り込み

月末 or 必要に応じて：

売上CSV（確定版）を上書きモードで取り込み、その月を入れ直す

予算 vs 実績・PLを参照し、施策判断

定期的なメンテ

商品マスタの管理中 / 管理外の見直し

原価・販売価格の更新

不完全マスタの解消

9. 前提条件 / 制約

システム形態：社内向け Web アプリ

ブラウザ：PC版 Google Chrome のみサポート（Edge 等は非サポート）

NE売上CSVには行単位のユニークIDが無いため、

行レベル重複排除は行わない

追加モードは「未取込分だけを追加する」という運用前提

月を入れ直したい場合は 上書きモードで対象月を全再取込

売上日（日次）はCSVから取得できない前提：

データは 対象年月単位で集計 する

将来日付付きデータに移行するために、売上日カラムはDB上のみ予約可

10. 補足・将来拡張

マルチブランド対応（ブランドID追加）

日次PL / 日次推移グラフ

商品別広告費配賦ロジック

期間予算における「月別配分率」や「季節係数」を使った自動配分

取込履歴単位の部分ロールバック

API連携による広告費自動取込（META / Google 等）