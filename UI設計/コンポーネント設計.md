# Rinori 販売管理システム - コンポーネント設計

## 1. 共通コンポーネント一覧

- ナビゲーションメニュー
- ボタン
- フォーム要素
- データテーブル
- モーダル / ダイアログ
- アラートメッセージ
- ローディングインジケーター

## 2. 権限制御とコンポーネント

- ヘッダー内のユーザー名・権限表示
- マスター専用エリア（PL総合計など）の表示/非表示
- スタッフ権限での制限事項

各コンポーネントの詳細仕様（プロパティ、状態、バリエーション）は、要件定義書および詳細仕様書(01/04/05)の内容に基づき、本ファイル内で順次具体化する。

---

## 3. コンポーネント詳細仕様

### 3.1 ナビゲーションメニュー

役割:

- 全画面共通のヘッダー内に配置し、主要機能への移動を提供する。

代表項目:

- 売上管理（売上CSV取込 / CSV取込履歴）
- 商品管理（商品マスタ一覧 / 商品一覧CSV取込 / 新商品候補一覧）
- 予算管理（月別予算設定 / 期間予算編集 / 予算 vs 実績）
- PL・分析（PL画面 / 商品別PL）
- 広告費管理（広告費一覧 / 広告費入力）
- 設定（税率設定）

プロパティ例:

- `activeMenu`: 現在アクティブなメニューID
- `userRole`: `master` / `staff`

権限制御:

- スタッフ権限でもメニュー自体は基本同一だが、PL総合計などはコンテンツ側で制御。

### 3.2 ボタン

バリエーション:

- `primary`: 主要アクション（保存、取込実行など）
- `secondary`: 副次アクション（キャンセル、戻るなど）
- `danger`: 削除などの破壊的操作

共通プロパティ例:

- `label`: ボタンテキスト
- `type`: `primary` / `secondary` / `danger`
- `size`: `sm` / `md` / `lg`（標準は `md`）
- `disabled`: 真偽値

状態:

- 通常 / ホバー / フォーカス / 無効 / ローディング中（スピナー表示）

### 3.3 フォーム要素

種類:

- テキスト入力、数値入力、テキストエリア
- セレクトボックス
- ラジオボタン（取込モードなど）
- チェックボックス（行選択）
- 日付入力 / 年月入力

共通仕様:

- ラベルは上部に配置
- 必須項目には「*」やラベル横の色で明示
- エラー時:
  - 枠線をエラーカラーに変更
  - ラベル下にエラーメッセージを表示

### 3.4 データテーブル

用途:

- 商品マスタ一覧、予算一覧、PL商品別一覧、広告費一覧、CSV取込履歴など

共通機能:

- ソート: ヘッダークリックで昇順/降順切替
- フィルタ: 画面ごとのフィルタUIと連動
- ページング: 下部にページネーション（件数表示含む）

ソートの実装詳細:

- ヘッダーセルにソートアイコンを表示（▲▼）
- 初期状態: ソート未適用（アイコンはグレー）
- クリック1回目: 昇順ソート（▲が強調）
- クリック2回目: 降順ソート（▼が強調）
- クリック3回目: ソート解除（初期状態に戻る）
- 現在ソート中の列はヘッダー背景を薄く強調

行状態:

- 通常 / ホバー / 選択（チェックボックス）

### 3.5 モーダル / ダイアログ

代表用途:

- 期間予算の履歴表示（SC-10）
-  - タイトル: 「期間予算の変更履歴」
-  - ボディ: 履歴テーブル（保存日時、期間合計数量、月別内訳をJSON形式で表示）
-  - フッター: 「閉じる」ボタン
- 売上CSV上書きモード時の確認
-  - タイトル: 「確認」
-  - ボディ: 「対象月（YYYY-MM）の全実績データを削除して上書きします。よろしいですか？」
-  - フッター: 「OK」「キャンセル」ボタン

構成:

- ヘッダー: タイトル
- ボディ: メッセージ or テーブル
- フッター: アクションボタン（OK / キャンセルなど）

プロパティ例:

- `title`: モーダルタイトル
- `isOpen`: 表示/非表示
- `size`: `sm` / `md` / `lg`

### 3.6 アラートメッセージ

種類:

- 成功メッセージ
- 警告メッセージ
- エラーメッセージ

表示位置:

- 原則として画面上部（ヘッダー直下）に表示
- 複数ある場合はリスト表示

例:

- 不完全マスタ警告（トップページ）
- 期間予算のズレ警告（SC-10）

### 3.7 ローディングインジケーター

用途:

- CSV取込処理中
- 大量データテーブルの読込中

パターン:

- 画面全体オーバーレイ + スピナー
- テーブル内プレースホルダ行

### 3.8 権限制御と表示コンポーネント

権限制御の対象:

- トップページの「今月のサマリ」セクション（スタッフは非表示）
- PL画面の総合計ブロック（スタッフは非表示）

実装方針:

- これらは専用コンポーネント（例: `SummaryPanel`, `PlSummaryPanel`）として切り出し、
  `userRole` をプロパティとして受け取り、`role === 'master'` の場合のみレンダリングする。

