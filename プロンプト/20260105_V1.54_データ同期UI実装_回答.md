# Windsurf実装質問への回答

## 1. 対象月の選択範囲

### Q1: 過去12ヶ月分の選択肢で良いでしょうか？
**回答**: **はい、過去12ヶ月で問題ありません**。

### Q2: それとも、もっと広い範囲が必要でしょうか？
**回答**: **過去12ヶ月で十分です**。理由：
- 通常、過去1年分のデータを遡って同期することは稀
- 必要に応じて後から範囲を拡張可能

---

## 2. 同期実行後の動作

### Q1: 結果メッセージを表示した後、自動的に消えるようにしますか？
**回答**: **いいえ、自動的に消さないでください**。理由：
- ユーザーが結果を確認する時間が必要
- 同期件数などの重要な情報を見逃す可能性がある

### Q2: それとも、ユーザーが手動で閉じるまで表示し続けますか？
**回答**: **はい、手動で閉じるまで表示し続けてください**。

### Q3: 手動で閉じる場合、「×」ボタンを表示しますか？
**回答**: **はい、「×」ボタンを表示してください**。以下の仕様で実装：

```html
<div className="relative p-4 bg-green-50 border border-green-200 rounded-lg">
  <button 
    onClick={() => setResultMessage(null)}
    className="absolute top-2 right-2 text-green-600 hover:text-green-800"
  >
    ✕
  </button>
  <p className="text-green-800">✅ 150件のデータを同期しました</p>
</div>
```

---

## 3. エラー時の再試行

### Q1: エラーが発生した場合、専用の「リトライ」ボタンを表示しますか？
**回答**: **いいえ、リトライボタンは不要です**。

### Q2: それとも、もう一度「同期実行」ボタンをクリックしてもらう形で良いでしょうか？
**回答**: **はい、もう一度「同期実行」ボタンをクリックしてもらう形で問題ありません**。理由：
- シンプルなUI設計を維持
- エラー内容を確認してから再実行するのが望ましい

---

## 4. 同期中の表示

### Q1: ローディング中に進捗バーを表示しますか？
**回答**: **いいえ、進捗バーは不要です**。理由：
- API呼び出しは通常数秒で完了
- 進捗率を正確に計算できない

### Q2: それとも、シンプルなスピナー（回転アイコン）で良いでしょうか？
**回答**: **はい、シンプルなスピナーで問題ありません**。既存の店舗マッピングUI（248-255行目）と同じスタイルを使用してください：

```html
<svg className="animate-spin h-8 w-8 text-[#00214d] mx-auto mb-3" fill="none" viewBox="0 0 24 24">
  <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
  <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>
```

### Q3: ローディング中のメッセージは「同期中...」のようなテキストを表示しますか？
**回答**: **はい、「同期中...」というテキストを表示してください**。

**ローディング表示の完全な仕様**:
```html
<div className="text-center py-12">
  <svg className="animate-spin h-8 w-8 text-[#00214d] mx-auto mb-3" fill="none" viewBox="0 0 24 24">
    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
  </svg>
  <p className="text-neutral-500 font-medium">同期中...</p>
</div>
```

---

## 📋 現在の理解（確認）

### データフロー
✅ **正しいです**。以下の通り実装してください：

1. `authStatus.connected === true` の場合のみ、データ同期UIを表示
2. 販路一覧は既に店舗マッピングで取得済みの`channels`を再利用
3. 対象月は過去12ヶ月分を生成（初期値：当月）
4. 販路は初期値として最初の販路を選択

### UI構成
✅ **正しいです**。以下の通り実装してください：

- 店舗マッピングセクションの下に新しいカードを追加
- 対象月選択プルダウン + 販路選択プルダウン + 同期実行ボタン
- 結果メッセージエリア（成功/警告/エラー）+ 「×」閉じるボタン

### スタイル
✅ **正しいです**。以下を厳守してください：

- 既存のデザインシステムに準拠（`#00214d`, `#d4af37`）
- 店舗マッピングの保存ボタンと同じスタイル（309-320行目を参考）

---

## 🚀 実装開始の許可

上記の回答を踏まえて、**実装計画を提示してください**。

実装計画の承認後、実装を開始してください。
