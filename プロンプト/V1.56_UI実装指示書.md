# Windsurf用 UI実装指示書 (V1.56)

## 0. 重要：行動指針（必ず遵守すること）
- **勝手な判断の禁止**: 仕様やデザインに曖昧な点がある場合は、実装を進めず必ずユーザーに質問してください。
- **事前の合意形成**: 各タスクの実装を開始する前に、具体的な実装プラン（どのファイルをどう変えるか）を提示し、ユーザーの承認を得てください。
- **段階的な実装**: 一度にすべての変更を行わず、1機能（例：CSV出力のみ）ごとに動作確認とユーザーレビューを受けてください。

## 1. 目的
Rinori 売上管理システム V1.56 のUI実装を完了させてください。バックエンドのロジックおよびAPIは既に実装済みです。

## 2. 実装済み事項 (確認用)
- **API**: `/api/charts/pl-trend`, `/api/charts/budget-vs-actual`
- **CSVロジック**: `/api/products/import/check`, `/api/products/import/apply`
- **ライブラリ**: `recharts`, `papaparse` インストール済み。

## 3. 具体的な実装タスク
※各項目の詳細なデザインや配置については、実装前に必ずユーザーに確認してください。

### 3-1. 商品マスタ CSVエクスポート (src/app/products/page.tsx)
- 「新規登録」ボタンの横に「CSV出力」ボタンを追加。
- `papaparse` を使用し、表示中のリストをBOM付きUTF-8で出力。
- 区分・ステータスは日本語に変換。

### 3-2. CSV取込UIの強化 (src/app/products/import/page.tsx)
- 列の追加：ASIN、区分、ステータス、カテゴリー。
- バリデーション警告：カテゴリー未登録（赤背景）、ASIN重複（黄色アイコン）。

### 3-3. PL推移グラフ (src/app/pl/page.tsx)
- アコーディオン形式でのグラフ表示。
- 実績と昨対（点線）の重ね合わせ。
- 表示項目の動的な切り替え。

### 3-4. 予算実績推移グラフ
- PLグラフと同様のUI構成。
- 達成率（2軸）の表示。

## 4. デザイン・品質要件
- 既存のプレミアムなデザイン言語（ダークモード、配色）を継承してください。
- グラフの配色やツールチップの表示内容についても、事前に案を提示して確認を得てください。

## 5. 使用するAPI
- `GET /api/charts/pl-trend`
- `GET /api/charts/budget-vs-actual`

---
まずは、全体の設計把握と、どのタスクから着手すべきかユーザーに相談してください。
