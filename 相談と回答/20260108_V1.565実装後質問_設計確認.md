# V1.565実装後の設計確認事項

## 実装完了報告と設計書との差異確認

V1.565の実装が完了しましたが、詳細設計書と実装内容の間にいくつかの差異があります。
以下の点について、設計意図の確認と優先順位の判断をお願いします。

---

## 1. 表示項目選択チェックボックスについて

### 設計書の記載（5-4 初期表示）
```
全ての項目を最初から表示すると視認性が悪くなるため、初期状態では以下の項目のみチェックをONとする。
- 予算実績グラフ (SC-11): 「実績売上」「予算売上」「達成率(%)」の3点。
- PL推移グラフ (SC-12/13): 「売上高」「粗利」「粗利率(%)」の3点。
```

### 現在の実装状況
- ✅ 商品/カテゴリー選択チェックボックス（最大5件）: 実装済み
- ✅ 「昨年対比を表示」チェックボックス: 実装済み
- ✅ グラフタイプ切替（折れ線/棒）: 実装済み
- ❌ **表示項目選択チェックボックス**（売上高、粗利、粗利率等の個別ON/OFF）: **未実装**

### 現在のグラフ表示内容
- **商品別PL / カテゴリー別PL**: 売上高と昨年売上のみ表示（固定）
- **予算実績グラフ**: 実績売上と予算売上のみ表示（固定）

### 質問1
**表示項目選択チェックボックス（売上高、粗利、粗利率等を個別にON/OFFする機能）は必須実装でしょうか？**

- A. 必須 → 追加実装が必要
- B. 任意 → 現状の固定表示で問題なし
- C. 将来対応 → V1.565では現状維持、次バージョンで対応

---

## 2. 複数Y軸対応について

### 設計書の記載（5-3 左右のY軸マッピング）
```
- 左軸 (YAxisId="left") / 単位: 円:
  - 売上、粗利、営業利益の実績・予算・昨年データ。
- 右軸 (YAxisId="right") / 単位: % または 個:
  - 達成率（%）、粗利率（%）、数量（個）。
- スケール混在時の優先順位:
  - 「数量（個）」と「各利率（%）」が同時に選択された場合、右Y軸のスケールは「数量」を優先して自動計算する。
```

### 現在の実装状況
- 現在は**単一Y軸**のみ使用（金額ベース）
- 率（%）や数量（個）は表示していない

### 質問2
**複数Y軸対応（左軸: 円、右軸: %または個）は必須実装でしょうか？**

これは「質問1」の表示項目選択機能と密接に関連しています。
- 表示項目選択が不要なら、複数Y軸も不要
- 表示項目選択を実装するなら、複数Y軸も必要

---

## 3. 初期表示項目の解釈について

### 設計書の記載の解釈
設計書の「初期状態では以下の項目のみチェックをON」という記述には、2つの解釈が可能です：

#### 解釈A: 表示項目選択UIが存在する前提
- グラフヘッダーに「売上高」「粗利」「粗利率」等のチェックボックスがある
- 初期状態では一部のみON、ユーザーが自由に切り替え可能

#### 解釈B: 初期表示項目を固定で実装
- 表示項目選択UIは不要
- 設計書記載の項目を固定で表示（現在の実装に近い）

### 質問3
**設計書の意図はどちらでしょうか？**

- A. 解釈A（表示項目選択UIあり）
- B. 解釈B（固定表示）

---

## 4. 実装優先順位の確認

現在の実装状況を踏まえ、以下の優先順位で対応したいと考えています。

### 現在完了している機能（V1.565として十分機能する）
1. ✅ 複数商品/カテゴリーの比較選択（最大5件）
2. ✅ 比較グラフの動的表示（カラーパレット適用）
3. ✅ 昨年データ一括ON/OFF切替
4. ✅ グラフタイプ切替（折れ線/棒）
5. ✅ 販路フィルタ時の注釈表示
6. ✅ V1.55機能復元（カテゴリー列・フィルタ）

### 追加実装が必要な可能性がある機能
1. ❓ 表示項目選択チェックボックス（売上高、粗利、粗利率等）
2. ❓ 複数Y軸対応（左軸: 円、右軸: %）
3. ❓ 達成率・数量の表示

### 質問4
**上記の追加機能について、V1.565の範囲として実装すべきでしょうか？**

- A. 全て実装必須 → 追加実装を進める
- B. 一部のみ必須 → どれが必須か指定してください
- C. 現状で十分 → V1.565は現在の実装で完了とする

---

## 5. 凡例クリック機能について

### 設計書の記載（5-5）
```
Rechartsの凡例をクリックした際、特定のラインのhide属性を切り替えるインタラクティブ機能を実装する。
```

### 現在の実装状況
- Rechartsのデフォルト機能により、凡例クリックでライン表示/非表示が可能
- 追加実装は不要

### 確認事項
この機能は**Rechartsのデフォルト動作で実現済み**です。問題ありませんか？

---

## まとめ

### 実装判断が必要な項目
1. **表示項目選択チェックボックス**: 必須か任意か？
2. **複数Y軸対応**: 必須か任意か？
3. **実装範囲**: V1.565で全て実装するか、段階的に実装するか？

### 推奨対応
現在の実装でも**基本的な比較グラフ機能は完全に動作**しており、ユーザーは以下が可能です：
- 最大5件の商品/カテゴリーを選択して比較
- 昨年データの表示/非表示切替
- 折れ線/棒グラフの切替
- 販路フィルタ時の適切な注釈表示

**設計意図を確認の上、追加実装の要否を判断させてください。**

---

## 回答欄

### 質問1の回答:
[ ] A. 必須  
[ ] B. 任意  
[ ] C. 将来対応

### 質問2の回答:
[ ] 必須  
[ ] 不要

### 質問3の回答:
[ ] A. 解釈A（表示項目選択UIあり）  
[ ] B. 解釈B（固定表示）

### 質問4の回答:
[ ] A. 全て実装必須  
[ ] B. 一部のみ必須（具体的に: ___________________）  
[ ] C. 現状で十分

### その他コメント:


